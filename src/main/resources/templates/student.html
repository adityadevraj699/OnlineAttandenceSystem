<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ERP Attendance System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body style="background: linear-gradient(to right, #e0f7fa, #e1f5fe); min-height:100vh; display:flex; flex-direction:column; font-family:Arial, sans-serif;">

  <!-- Header -->
  <header class="text-center text-dark py-4" style="background-color: rgba(255,255,255,0.8); border-bottom:1px solid #ccc; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
    <h1 style="font-weight:700; letter-spacing:1px;">ERP Attendance System</h1>
    <p style="font-size:1.1rem; opacity:0.8;">Student Dashboard</p>
  </header>

  <!-- Main Content -->
  <main class="flex-grow-1 container py-5 d-flex justify-content-center align-items-center">
    <div class="col-md-6">
      <div class="card shadow-lg p-4" style="border-radius:20px; background: rgba(255,255,255,0.95); transition: transform 0.3s;">
        <h2 class="mb-3" style="color:#4a90e2; font-weight:700;">Welcome, Student!</h2>
        <p class="mb-4" style="color:#555;">Mark your attendance by entering your Roll Number below.</p>


        <!-- Attendance Form -->
        <form method="post" action="/student" class="text-start">
          <div class="mb-3">
            <label for="rollNo" class="form-label" style="font-weight:500;">Roll Number</label>
            <input type="text" class="form-control form-control-lg" id="rollNo" name="rollNo" placeholder="e.g., 12345" required>
          </div>
          <div class="d-grid">
            <button type="submit" class="btn btn-primary btn-lg" style="border-radius:10px; background: linear-gradient(to right, #4a90e2, #357ABD); border:none; font-weight:600;">Mark Attendance</button>
          </div>
        </form>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="text-center text-dark py-3" style="background-color: rgba(255,255,255,0.8); border-top:1px solid #ccc; box-shadow: 0 -2px 5px rgba(0,0,0,0.05); font-size:0.9rem;">
    Â© 2025 ERP Attendance System
  </footer>
  <input type="hidden" id="serverMessage" th:value="${message != null} ? ${message} : (${error != null} ? ${error} : '')"/>
  
  <!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    const serverMessage = document.getElementById("serverMessage")?.value;

    if (serverMessage && serverMessage.trim() !== "") {
        const lowerMsg = serverMessage.toLowerCase();

        const isError = lowerMsg.includes('invalid') || 
                        lowerMsg.includes('error') || 
                        lowerMsg.includes('already');

        Swal.fire({
            title: 'Notification',
            text: serverMessage,
            icon: isError ? 'error' : 'success',
            confirmButtonColor: '#2575fc',
            background: '#f9f9f9',
            color: '#333',
            timer: 4000,
            timerProgressBar: true
        });
    }
});
</script>
</body>
</html>
